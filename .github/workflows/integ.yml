# ~~ Generated by projen. To modify, edit .projenrc.js and run "npx projen".

name: integ
on:
  pull_request_target:
    types:
      - labeled
      - opened
      - synchronize
      - reopened
      - ready_for_review
  merge_group: {}
jobs:
  test:
    runs-on: ubuntu-latest
    permissions:
      contents: read
    environment: IntegTestCredentials
    steps:
      - name: Federate into AWS
        uses: aws-actions/configure-aws-credentials@v2
        with:
          aws-region: us-east-1
          role-to-assume: ${{ secrets.AWS_ROLE_TO_ASSUME }}
          role-session-name: publib-integ-test
      - name: Checkout
        uses: actions/checkout@v3
        with:
          ref: ${{ github.event.pull_request.head.ref }}
      - name: Setup Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 16.16.0
          cache: yarn
      - name: Run integration tests
        run: npx jest --testMatch "<rootDir>/test/**/?(*.)+\.integ\.ts?(x)"
